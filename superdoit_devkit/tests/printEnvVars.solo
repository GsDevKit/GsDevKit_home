#!/usr/bin/env superdoit_solo
options
{
  SuperDoitCommandLineOption long: 'help' short: 'h'.
  SuperDoitCommandLineOption long: 'debug' short: 'D'.
}
%
usage
-----
USAGE $basename [--help | -h] [--debug | -D] <env-var-names> ...

DESCRIPTION
  Print the values of env vars using System class >> #gemEnvironmentVariable. 
  Positional arguments on command line are interpretted as a list of env var 
	names to be displayed on stdout.

OPTIONS
  -h, --help                 display usage message
  -D, --debug                bring up topaz debugger in the event of a script error

EXAMPLES
  $basename --help
  $basename -h
  $basename --debug
  $basename -D
  $basename x y z
-----
%
method
getAndVerifyOptions
		self getOpts: self optionSpecs.
		self help ifTrue: [ ^ self usage ].
%
doit
	[
		| pairs |
		self getAndVerifyOptions == self noResult
			ifTrue: [ ^ self noResult ].
		self positionalArgs do: [:envVar |
			| value |
			value := System gemEnvironmentVariable: envVar.
			self logMessage: envVar, '=', value printString  ].
		self noResult
	] on: Error do: [:ex | 
		self debug ifTrue: [ ex pass ].
		self exit: ex messageText withStatus: 1 "does not return" ].
%
