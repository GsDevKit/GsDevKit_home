#!/usr/bin/env superdoit_solo_devkit
instvars
%
options
{
  SuperDoitCommandLineOption long: 'help' short: 'h'.
	SuperDoitCommandLineOption long: 'debug'.
}
%
usage
-----
USAGE $basename [--help | -h]

DESCRIPTION
  Script to test working with environments and stone contexts (groups of environment variables)

OPTIONS
  -h, --help 		display usage message
	--debug		display debugging messages

EXAMPLES
  $basename --help
  $basename --debug
-----
%
method
testContext
	self stderr nextPutAll: 'PWD: ', (System gemEnvironmentVariable: 'PWD') asString; cr.
%
method
getAndVerifyOptions
	self getOpts: self optionSpecs.
	self help ifTrue: [ ^ self usage ].
%
doit
	[
		self getAndVerifyOptions == self noResult
			ifTrue: [ ^ self noResult ].
		self testContext.
		^ self noResult
	] on: Error do: [:ex |
		self debug ifTrue: [ ex pass ].
		self exit: ex messageText withStatus: 1 "does not return" ].
%
